System.register("chunks:///_virtual/joy-stick.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ClampedCtrl.ts"],(function(t){"use strict";var i,e,o,n,r,s,c,a,h,u,l,d,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.defineProperty},function(t){s=t.cclegacy,c=t._decorator,a=t.Vec3,h=t.Vec2,u=t.Node,l=t.UIOpacity,d=t.Component},function(t){p=t.ClampedCtrl}],execute:function(){var y,f,E,m,x,T,v,A,b,g,C,w;s._RF.push({},"0df005HeCFHbLgcmwtx6QL2","joy-stick",void 0);var S=c.ccclass,O=c.property,_=new a,R=new h;t("JoyStick",(y=S("JoyStick"),f=O({type:u}),E=O({type:u}),m=O({type:l}),x=O({type:u}),y((A=i((v=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),c=0;c<e;c++)s[c]=arguments[c];return i=t.call.apply(t,[this].concat(s))||this,o(n(i),"maxRadius",A,n(i)),o(n(i),"touchArea",b,n(i)),o(n(i),"control",g,n(i)),o(n(i),"indexArrow",C,n(i)),o(n(i),"joyStick",w,n(i)),r(n(i),"direction",new a),r(n(i),"distance",0),r(n(i),"magnitude",0),r(n(i),"rotation",0),r(n(i),"_currentScreenVerticle",!0),r(n(i),"startPos",new a),r(n(i),"indexEuler",new a),i}e(i,t);var s=i.prototype;return s.onEnable=function(){this.touchArea.on(u.EventType.TOUCH_START,this.touchStart,this),this.touchArea.on(u.EventType.TOUCH_MOVE,this.touchMove,this),this.touchArea.on(u.EventType.TOUCH_END,this.touchEnd,this),this.touchArea.on(u.EventType.TOUCH_CANCEL,this.touchEnd,this),this.startPos=this.joyStick.position.clone()},s.onDisable=function(){this.touchArea.off(u.EventType.TOUCH_START,this.touchStart,this),this.touchArea.off(u.EventType.TOUCH_MOVE,this.touchMove,this),this.touchArea.off(u.EventType.TOUCH_END,this.touchEnd,this),this.touchArea.off(u.EventType.TOUCH_CANCEL,this.touchEnd,this)},s.touchStart=function(t){this.indexArrow.opacity=255,this.joyStick.setWorldPosition(t.getUILocation().x,t.getUILocation().y,0)},s.touchMove=function(t){p.moving=!0,t.getUILocation(R),this.joyStick.getWorldPosition(_),_.set(R.x-_.x,R.y-_.y,0),this.direction=_.clone().normalize(),this.distance=a.distance(_,a.ZERO),this.distance>=this.maxRadius&&(this.distance=this.maxRadius),this.magnitude=this.distance/this.maxRadius,a.multiplyScalar(_,this.direction,this.distance),this.rotation=-Math.atan2(this.direction.x,this.direction.y)*(180/Math.PI),this.rotation<=45&&this.rotation>=-45?this.indexEuler.z=0:this.rotation>45&&this.rotation<135?this.indexEuler.z=90:this.rotation<-45&&this.rotation>-135?this.indexEuler.z=-90:this.indexEuler.z=180,this.indexArrow.node.setRotationFromEuler(this.indexEuler),this.control.setPosition(_)},s.touchEnd=function(){this.indexArrow.opacity=0,p.moving=!1,this.magnitude=0,this.direction.set(a.ZERO),this.control.setPosition(a.ZERO),this.joyStick.setPosition(this.startPos)},i}(d)).prototype,"maxRadius",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),b=i(v.prototype,"touchArea",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=i(v.prototype,"control",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(v.prototype,"indexArrow",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(v.prototype,"joyStick",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=v))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/NavTest.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Builder.ts","./NavMesh.ts","./NavMeshAgent.ts","./PoolManager.ts"],(function(e){"use strict";var t,n,o,i,r,a,s,l,u,c,h,f,d,g,v,p,m,y,b,P,N,T,M,A,C,z;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.defineProperty},function(e){a=e.cclegacy,s=e._decorator,l=e.JsonAsset,u=e.CameraComponent,c=e.Vec3,h=e.resources,f=e.Prefab,d=e.input,g=e.Input,v=e.sys,p=e.view,m=e.macro,y=e.screen,b=e.MeshRenderer,P=e.isValid,N=e.geometry,T=e.Component},function(e){M=e.Builder},function(e){A=e.NavMesh},function(e){C=e.NavMeshAgent},function(e){z=e.PoolManager}],execute:function(){var D,E,_,w,S,L,U,O,R;a._RF.push({},"16666ugOSRNLqk2sZ/HleKG","NavTest",void 0);var B=s.ccclass,H=s.property,I=new c,V=new c;e("default",(D=B("NavTest"),E=H(l),_=H(u),w=H({type:C}),D((U=t((L=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,o(i(t),"navUrl",U,i(t)),o(i(t),"mainCamera",O,i(t)),o(i(t),"agent",R,i(t)),r(i(t),"targetPos",new c),r(i(t),"zone",null),t}n(t,e);var a=t.prototype;return a.start=function(){h.load("Prefab/Pointer",f,(function(e,t){z.ins.setPrefab("Pointer",t)}))},a.onEnable=function(){d.on(g.EventType.TOUCH_END,this.screenTouch,this),this.changeScreeen();var e=M.buildZoneByJson(this.navUrl.json);this.zone=this.navUrl.name,A.setZoneData(this.zone,e)},a.onDisable=function(){M.cleanGeometry(),A.clearZoneData(this.zone),this.zone=null,d.off(g.EventType.TOUCH_END,this.screenTouch,this)},a.changeScreeen=function(){v.isBrowser&&v.isMobile&&(p.setOrientation(m.ORIENTATION_LANDSCAPE),y.requestFullScreen())},a.screenTouch=function(e){var t=e.getLocation();this.getTouchModel(t)},a.getTouchModel=function(e){for(var t=this.mainCamera.screenPointToRay(e.x,e.y),n=this.node.parent.getComponentsInChildren(b),o=null,i=Number.MAX_VALUE,r=0;r<n.length;r++){var a=n[r];if(P(a.node,!0)&&a.node.active&&a.model){var s=N.intersect.rayModel(t,a.model,{mode:N.ERaycastMode.CLOSEST,doubleSided:!1,distance:Number.MAX_VALUE});s&&s<i&&(i=s,o=a)}}if(null!=o){t.computeHit(this.targetPos,i);for(var l=this.node.children.length;l>=0;l--)z.ins.putNode(this.node.children[l]);for(l=0;l<this.agent.length;l++)this.moveAgent(this.agent[l],this.targetPos)}},a.moveAgent=function(e,t){var n=this.findPath(this.zone,e.node.position,t);if(n&&n.length>0){e.startMove(n);for(var o=0,i=0;i<n.length;i++)this.setDebugNode(n[i],o),o+=50}else e.stopMove()},a.findPath=function(e,t,n){I.set(t);var o=A.getGroup(e,I);return V.set(n),A.findPath(I,V,e,o)},a.setDebugNode=function(e,t){var n=this;void 0===t&&(t=0),setTimeout((function(){z.ins.getNode("Pointer",n.node).setPosition(e)}),t)},t}(T)).prototype,"navUrl",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(L.prototype,"mainCamera",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(L.prototype,"agent",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=L))||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/NavMesh.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./nUtils.ts","./Astar.ts","./Channel.ts","./Plane.ts","./Triangle.ts"],(function(n){"use strict";var e,t,r,o,s,i,u,a;return{setters:[function(n){e=n.defineProperty},function(n){t=n.cclegacy,r=n.Vec3},function(n){o=n.nUtils},function(n){s=n.Astar},function(n){i=n.Channel},function(n){u=n.Plane},function(n){a=n.Triangle}],execute:function(){t._RF.push({},"2ad69Row9tKGo6dR8xOoxwB","NavMesh",void 0);var c=new r,l=new u,h=new a,f=new r,v=new r,d=Math.pow(50,2),p=n("NavMesh",function(){function n(){}return n.setZoneData=function(n,e){this.zone[n]=e},n.clearZoneData=function(n){this.zone[n]=null},n.getGroup=function(n,e){if(!this.zone[n])return null;for(var t=null,o=d,s=0,i=this.zone[n].groups.length;s<i;s++)for(var u=this.zone[n].groups[s],a=0,c=u.length;a<c;a++){var l=u[a],h=r.squaredDistance(l.centroid,e);h<o&&(t=s,o=h)}return t},n.getRandomNode=function(n,e,t,s){if(!this.zone[n])return new r;t=t||null,s=s||0;var i=[];return this.zone[n].groups[e].forEach((function(n){t&&s?r.squaredDistance(t,n.centroid)<s*s&&i.push(n.centroid):i.push(n.centroid)})),o.sample(i)||new r},n.findPath=function(n,e,t,u){for(var a,c=this.zone[t].groups[u],l=this.zone[t].vertices,h=null,f=d,v=0,p=c.length;v<p;v++){var g=c[v];(a=r.squaredDistance(g.centroid,n))<f&&(h=g,f=a)}var z=null;f=d;for(var P=0,w=c.length;P<w;P++){var x=c[P];(a=r.squaredDistance(x.centroid,e))<f&&o.isVectorInPolygon(e,x,l)&&(z=x,f=a)}if(!h||!z)return null;var D=s.search(c,h,z),I=function(n,e){for(var t=0;t<n.neighbours.length;t++)if(n.neighbours[t]===e.id)return n.portals[t]},q=new i;q.push(n);for(var b=0;b<D.length;b++){var m=D[b],y=D[b+1];if(y){var M=I(m,y);q.push(l[M[0]],l[M[1]])}}return q.push(e),q.stringPull(),q.path},n.getClosestNode=function(n,e,t,s){void 0===s&&(s=!1);var i=this.zone[e].groups[t],u=this.zone[e].vertices,a=null,c=d;return i.forEach((function(e){var t=r.squaredDistance(e.centroid,n);t<c&&(!s||o.isVectorInPolygon(n,e,u))&&(a=e,c=t)})),a},n.clampStep=function(n,e,t,o,s){var i,u,a=this.zone[t].vertices,p=this.zone[t].groups[o],g=[e],z={};z[e.id]=0,c.set(0,0,0),i=d,l.setFromCoplanarPoints(a[e.vertexIds[0]],a[e.vertexIds[1]],a[e.vertexIds[2]]),l.projectPoint(n,f),v.set(f);for(var P=g.pop();P;P=g.pop()){h.set(a[P.vertexIds[0]],a[P.vertexIds[1]],a[P.vertexIds[2]]),h.closestPointToPoint(v,f),(u=r.squaredDistance(f,v))<i&&(c.set(f),i=u);var w=z[P.id];if(!(w>2))for(var x=0;x<P.neighbours.length;x++){var D=p[P.neighbours[x]];D.id in z||(g.push(D),z[D.id]=w+1)}}s.set(c)},n}());e(p,"zone",{}),t._RF.pop()}}}));

System.register("chunks:///_virtual/ClampedCtrl.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Builder.ts","./NavMesh.ts","./joy-stick.ts"],(function(t){"use strict";var e,n,i,o,s,a,r,h,p,u,c,l,d,m,g,y,E,v,_;return{setters:[function(t){e=t.defineProperty,n=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized,a=t.asyncToGenerator},function(t){r=t.cclegacy,h=t._decorator,p=t.JsonAsset,u=t.Vec3,c=t.v3,l=t.input,d=t.Input,m=t.KeyCode,g=t.Component,y=t.SkeletalAnimationComponent},function(t){E=t.Builder},function(t){v=t.NavMesh},function(t){_=t.JoyStick}],execute:function(){var f,K,Y,S,A,C,k,z,D;r._RF.push({},"34f9e/owaNHE6LE98+egryH","ClampedCtrl",void 0);var M,R=new u,b=new u,w=h.ccclass,j=h.property,x=(h.type,"idle");t("ClampedCtrl",(f=w("ClampedCtrl"),K=j(p),Y=j(_),f((D=z=function(t){function n(){for(var n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return n=t.call.apply(t,[this].concat(a))||this,o(s(n),"navUrl",C,s(n)),o(s(n),"joyStick",k,s(n)),e(s(n),"KEY_A",!1),e(s(n),"KEY_W",!1),e(s(n),"KEY_S",!1),e(s(n),"KEY_D",!1),e(s(n),"jumping",!1),e(s(n),"canMove",!0),e(s(n),"jumpstate",0),e(s(n),"speed",new u(0,0,0)),e(s(n),"jumpSpeed",c(0,8,0)),e(s(n),"targetSpeed",new u(0,0,0)),e(s(n),"rotation",0),e(s(n),"targetRotation",180),e(s(n),"_currentAnim",""),e(s(n),"speedAmount",.05),e(s(n),"zone",null),e(s(n),"anm",null),e(s(n),"anmName",null),n}i(n,t);var r=n.prototype;return r.onEnable=function(){var t=a(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.anm=this.node.getComponent(y),this.playLoopAnm(x),e=E.buildZoneByJson(this.navUrl.json),this.zone=this.navUrl.name,v.setZoneData(this.zone,e),this._registerEvent();case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.onDisable=function(){v.clearZoneData(this.zone),this._unregisterEvent()},r._registerEvent=function(){l.on(d.EventType.KEY_UP,this.onKeyUp,this),l.on(d.EventType.KEY_DOWN,this.onKeyDown,this),this._currentAnim=null},r._unregisterEvent=function(){l.off(d.EventType.KEY_UP,this.onKeyUp,this),l.off(d.EventType.KEY_DOWN,this.onKeyDown,this)},r.playLoopAnm=function(t){this.anmName!=t&&(this.anm.play(t),this.anmName=t)},r.rotateRole=function(t){this.targetRotation=Math.atan2(t.x-this.node.position.x,t.z-this.node.position.z)*(180/Math.PI)%360,this.node.setRotationFromEuler(0,this.targetRotation,0)},r.update=function(t){this.stickCtrl(t)},r.getClamped=function(t){var e=v.getGroup(this.zone,t),n=v.getClosestNode(t,this.zone,e);return v.clampStep(t,n,this.zone,e,b),b},r.heroMove=function(){n.moving&&(u.add(R,this.node.position,this.speed),this.node.setPosition(this.getClamped(R)),this.node.setRotationFromEuler(0,this.targetRotation))},r.stickCtrl=function(t){n.moving?(this.targetRotation=this.joyStick.rotation,M=this.targetRotation*Math.PI/180,this.targetSpeed.x=this.speedAmount*Math.sin(M),this.targetSpeed.z=this.speedAmount*Math.cos(M),u.lerp(this.speed,this.speed,this.targetSpeed,5*t),this.heroMove(),this.playLoopAnm("run")):this.playLoopAnm(x)},r.keyCtrl=function(t){M=this.targetRotation*Math.PI/180,this.targetSpeed.x=this.targetSpeed.z=0,n.moving=!1,this.KEY_W&&(this.targetSpeed.x=this.speedAmount*Math.sin(M),this.targetSpeed.z=this.speedAmount*Math.cos(M),n.moving=!0),this.KEY_A&&(this.jumping||(this.targetRotation+=180*t),n.moving=!0),this.KEY_S?(this.targetSpeed.x=this.speedAmount*Math.sin(M),this.targetSpeed.z=this.speedAmount*Math.cos(M),n.moving=!0):this.KEY_D&&(this.jumping||(this.targetRotation-=180*t),n.moving=!0),n.moving?(u.lerp(this.speed,this.speed,this.targetSpeed,5*t),this.playLoopAnm("run")):(this.speed.x=this.speed.z=0,this.playLoopAnm(x)),this.heroMove()},r.onKeyDown=function(t){switch(t.keyCode){case m.KEY_A:this.KEY_A=!0;break;case m.KEY_W:this.KEY_W=!0;break;case m.KEY_D:this.KEY_D=!0;break;case m.KEY_S:this.KEY_S=!0}},r.onKeyUp=function(t){switch(t.keyCode){case m.KEY_A:this.KEY_A=!1;break;case m.KEY_W:this.KEY_W=!1;break;case m.KEY_D:this.KEY_D=!1;break;case m.KEY_S:this.KEY_S=!1,this.targetRotation+=180}},n}(g),e(z,"moving",!1),C=n((A=D).prototype,"navUrl",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(A.prototype,"joyStick",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=A))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/Triangle.ts",["cc"],(function(t){"use strict";var r,e;return{setters:[function(t){r=t.cclegacy,e=t.Vec3}],execute:function(){r._RF.push({},"35cdcVeRH9OiZ+tY3WOZsIf","Triangle",void 0);var i=new e,n=new e,s=new e,a=new e,c=new e,u=new e;t("Triangle",function(){function t(t,r,i){void 0===t&&(t=new e),void 0===r&&(r=new e),void 0===i&&(i=new e),this.a=t,this.b=r,this.c=i,this.c=i,this.b=r,this.a=t}var r=t.prototype;return r.set=function(t,r,e){return this.a.set(t),this.b.set(r),this.c.set(e),this},r.closestPointToPoint=function(t,r){var o,l,d=this.a,v=this.b,h=this.c;e.subtract(i,v,d),e.subtract(n,h,d),e.subtract(s,t,d);var f=i.dot(s),b=n.dot(s);if(f<=0&&b<=0)return r.set(d.clone());e.subtract(a,t,v);var p=i.dot(a),w=n.dot(a);if(p>=0&&w<=p)return r.set(v.clone());var y=f*w-p*b;if(y<=0&&f>=0&&p<=0)return o=f/(f-p),r.set(d.clone().add(i.multiplyScalar(o)));e.subtract(c,t,h);var m=i.dot(c),S=n.dot(c);if(S>=0&&m<=S)return r.set(h);var g=m*b-f*S;if(g<=0&&b>=0&&S<=0)return l=b/(b-S),r.set(d.add(n.multiplyScalar(l)));var T=p*S-m*w;if(T<=0&&w-p>=0&&m-S>=0)return e.subtract(u,h,v),l=(w-p)/(w-p+(m-S)),r.set(v.add(u.multiplyScalar(l)));var R=1/(T+g+y);return o=g*R,l=y*R,r.set(d.add(i.multiplyScalar(o)).add(n.multiplyScalar(l)))},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/Astar.ts",["cc","./BinaryHeap.ts"],(function(e){"use strict";var t,r,n;return{setters:[function(e){t=e.cclegacy,r=e.Vec3},function(e){n=e.BinaryHeap}],execute:function(){t._RF.push({},"3a8d2z5ZhBKLb4QNlLsVGg2","Astar",void 0);e("Astar",function(){function e(){}return e.init=function(e){for(var t=0;t<e.length;t++){var r=e[t];r.f=0,r.g=0,r.h=0,r.cost=1,r.visited=!1,r.closed=!1,r.parent=null}},e.cleanUp=function(e){for(var t=0;t<e.length;t++){var r=e[t];delete r.f,delete r.g,delete r.h,delete r.cost,delete r.visited,delete r.closed,delete r.parent}},e.heap=function(){return new n((function(e){return e.f}))},e.search=function(e,t,n){this.init(e);var i=this.heap();for(i.push(t);i.size()>0;){var s=i.pop();if(s===n){for(var o=s,c=[];o.parent;)c.push(o),o=o.parent;return this.cleanUp(c),c.reverse()}s.closed=!0;for(var a=this.neighbours(e,s),u=0,h=a.length;u<h;u++){var f=a[u];if(!f.closed){var d=s.g+f.cost,l=f.visited;if(!l||d<f.g){if(f.visited=!0,f.parent=s,!f.centroid||!n.centroid)throw new Error("Unexpected state");f.h=f.h||r.squaredDistance(f.centroid,n.centroid),f.g=d,f.f=f.g+f.h,l?i.rescoreElement(f):i.push(f)}}}}return[]},e.neighbours=function(e,t){for(var r=[],n=0;n<t.neighbours.length;n++)r.push(e[t.neighbours[n]]);return r},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Channel.ts",["cc","./nUtils.ts"],(function(t){"use strict";var n,i;return{setters:[function(t){n=t.cclegacy},function(t){i=t.nUtils}],execute:function(){n._RF.push({},"53eb6n9zLJJKLVcIiMEG80P","Channel",void 0);t("Channel",function(){function t(t,n){void 0===t&&(t=[]),void 0===n&&(n=new Array),this.portals=t,this.path=n}var n=t.prototype;return n.push=function(t,n){void 0===n&&(n=null),null==n&&(n=t),this.portals.push({left:t,right:n})},n.stringPull=function(){var t,n,e,r=this.portals,l=[],h=0,s=0,u=0;t=r[0].left,n=r[0].left,e=r[0].right,l.push(t);for(var a=1;a<r.length;a++){var o=r[a].left,f=r[a].right;if(i.triarea2(t,e,f)<=0){if(!(i.vequal(t,e)||i.triarea2(t,n,f)>0)){l.push(n),n=t=n,e=t,s=h=s,u=h,a=h;continue}e=f,u=a}if(i.triarea2(t,n,o)>=0){if(!(i.vequal(t,n)||i.triarea2(t,e,o)<0)){l.push(e),n=t=e,e=t,s=h=u,u=h,a=h;continue}n=o,s=a}}0!==l.length&&i.vequal(l[l.length-1],r[r.length-1].left)||l.push(r[r.length-1].left),this.path=l,this.path.shift()},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Plane.ts",["cc"],(function(t){"use strict";var n,o;return{setters:[function(t){n=t.cclegacy,o=t.Vec3}],execute:function(){n._RF.push({},"64a8fMSe85Bn7aYYIv3XX3h","Plane",void 0);var r=new o,i=new o;t("Plane",function(){function t(t,n){void 0===t&&(t=new o(1,0,0)),void 0===n&&(n=0),this.normal=t,this.constant=n,this.normal=t,this.constant=n}var n=t.prototype;return n.setFromNormalAndCoplanarPoint=function(t,n){return this.normal.set(t),this.constant=-n.dot(this.normal),this},n.setFromCoplanarPoints=function(t,n,s){var a=o.subtract(r,s,n).cross(o.subtract(i,t,n)).normalize();return this.setFromNormalAndCoplanarPoint(a,t),this},n.projectPoint=function(t,n){return n.set(this.normal.multiplyScalar(-this.distanceToPoint(t)).add(t))},n.distanceToPoint=function(t){return this.normal.dot(t)+this.constant},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/nUtils.ts",["cc"],(function(n){"use strict";var r,t;return{setters:[function(n){r=n.cclegacy,t=n.Vec3}],execute:function(){r._RF.push({},"8ee06Csgn5F7rr0XWn5nG1u","nUtils",void 0);n("nUtils",function(){function n(){}return n.roundNumber=function(n,r){var t=Math.pow(10,r);return Math.round(n*t)/t},n.isPointInPoly=function(n,r){for(var t=!1,e=-1,u=n.length,i=u-1;++e<u;i=e)(n[e].z<=r.z&&r.z<n[i].z||n[i].z<=r.z&&r.z<n[e].z)&&r.x<(n[i].x-n[e].x)*(r.z-n[e].z)/(n[i].z-n[e].z)+n[e].x&&(t=!t);return t},n.isVectorInPolygon=function(n,r,t){var e=1e5,u=-1e5,i=[];return r.vertexIds.forEach((function(n){e=Math.min(t[n].y,e),u=Math.max(t[n].y,u),i.push(t[n])})),!!(n.y<u+.5&&n.y>e-.5&&this.isPointInPoly(i,n))},n.MoveTowards=function(n,r,t,e){var u=t.x-r.x,i=t.y-r.y,o=t.z-r.z,s=u*u+i*i+o*o;if(0==s||e>=0&&s<=e*e)return n.set(t),!0;var a=Math.sqrt(s);return n.set(r.x+u/a*e,r.y+i/a*e,r.z+o/a*e),!1},n.triarea2=function(n,r,t){var e=r.x-n.x,u=r.z-n.z;return(t.x-n.x)*u-e*(t.z-n.z)},n.mergeVertices=function(n){var r,t,e,u,i,o={},s=new Array,a=[];for(e=0,u=n.vertices.length;e<u;e++)null==o[t=n.vertices[e]]?(o[t]=e,s.push(t),a[e]=s.length-1):a[e]=a[o[t]];var c=[];for(e=0,u=n.faces.length;e<u;e++){(i=n.faces[e])[0]=a[i[0]],i[1]=a[i[1]],i[2]=a[i[2]],r=i;for(var f=0;f<3;f++)if(r[f]==r[(f+1)%3]){c.push(e);break}}for(e=c.length-1;e>=0;e--){var h=c[e];n.faces.splice(h,1)}n.vertices=s},n.sample=function(n){return n[Math.floor(Math.random()*n.length)]},n.vequal=function(n,r){return t.distance(n,r)<1e-5},n}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BinaryHeap.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,i;return{setters:[function(t){n=t.defineProperty},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"ab01cDrVgtDn5AN4KxNV/8X","BinaryHeap",void 0);t("BinaryHeap",function(){function t(t){n(this,"scoreFunction",void 0),n(this,"content",void 0),this.content=[],this.scoreFunction=t}var i=t.prototype;return i.push=function(t){this.content.push(t),this.sinkDown(this.content.length-1)},i.pop=function(){var t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),t},i.remove=function(t){var n=this.content.indexOf(t),i=this.content.pop();n!==this.content.length-1&&(this.content[n]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n))},i.size=function(){return this.content.length},i.rescoreElement=function(t){this.sinkDown(this.content.indexOf(t))},i.sinkDown=function(t){for(var n=this.content[t];t>0;){var i=(t+1>>1)-1,o=this.content[i];if(!(this.scoreFunction(n)<this.scoreFunction(o)))break;this.content[i]=n,this.content[t]=o,t=i}},i.bubbleUp=function(t){for(var n=this.content.length,i=this.content[t],o=this.scoreFunction(i);;){var e=t+1<<1,s=e-1,c=null,h=void 0;if(s<n){var r=this.content[s];(h=this.scoreFunction(r))<o&&(c=s)}if(e<n){var u=this.content[e];this.scoreFunction(u)<(null===c?o:h)&&(c=e)}if(null===c)break;this.content[t]=this.content[c],this.content[c]=i,t=c}},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/PoolManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,o,n,r;return{setters:[function(t){e=t.createClass,i=t.defineProperty},function(t){o=t.cclegacy,n=t.instantiate,r=t.NodePool}],execute:function(){o._RF.push({},"c5907eNs8FKs716t2Unmn66","PoolManager",void 0);var s=t("PoolManager",function(){function t(){i(this,"_dictPool",{}),i(this,"_dictPrefab",{})}var o=t.prototype;return o.copyNode=function(t,e){var i=t.name;this._dictPrefab[i]=t;var o=null;if(this._dictPool.hasOwnProperty(i)){var s=this._dictPool[i];o=s.size()>0?s.get():n(t)}else{var a=new r;this._dictPool[i]=a,o=n(t)}return e&&(o.parent=e,o.active=!0),o},o.getNode=function(t,e,i){var o,s;if("string"==typeof t){if(s=t,!(o=this._dictPrefab[t]))return console.log("Pool invalid prefab name = ",s),null}else o=t,s=t.data.name;var a=null;if(this._dictPool.hasOwnProperty(s)){var c=this._dictPool[s];a=c.size()>0?c.get():n(o)}else{var l=new r;this._dictPool[s]=l,a=n(o)}return e&&(a.parent=e,a.active=!0,i&&(a.position=i)),a},o.putNode=function(t,e){if(t){var i=t.name,o=null;this._dictPool.hasOwnProperty(i)?o=this._dictPool[i]:(o=new r,this._dictPool[i]=o),o.put(t)}},o.clearPool=function(t){this._dictPool.hasOwnProperty(t)&&this._dictPool[t].clear()},o.setPrefab=function(t,e){this._dictPrefab[t]=e},o.getPrefab=function(t){return this._dictPrefab[t]},e(t,null,[{key:"ins",get:function(){return this._ins||(this._ins=new t),this._ins}}]),t}());i(s,"_ins",void 0),o._RF.pop()}}}));

System.register("chunks:///_virtual/SceneTest.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,c,n,s,o;return{setters:[function(e){t=e.inheritsLoose},function(e){c=e.cclegacy,n=e._decorator,s=e.director,o=e.Component}],execute:function(){var r;c._RF.push({},"d773b1/HlZAzpx2ym49G3JF","SceneTest",void 0);var a=n.ccclass;e("SceneTest",a("SceneTest")(r=function(e){function c(){return e.apply(this,arguments)||this}return t(c,e),c.prototype.loadScene=function(e,t){switch(t){case"0":s.loadScene("Demo");break;case"1":s.loadScene("MazeTest");break;case"2":s.loadScene("NavTest");break;case"3":s.loadScene("ClampTest")}},c}(o))||r);c._RF.pop()}}}));

System.register("chunks:///_virtual/NavMeshAgent.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./nUtils.ts"],(function(t){"use strict";var e,s,n,i,o,h,a,p,l;return{setters:[function(t){e=t.inheritsLoose,s=t.defineProperty,n=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,h=t.Vec3,a=t.SkeletalAnimationComponent,p=t.Component},function(t){l=t.nUtils}],execute:function(){var r;i._RF.push({},"dfc11KeIodAQaGnodWJT/N8","NavMeshAgent",void 0);var u=o.ccclass;o.property,t("NavMeshAgent",u("NavMeshAgent")(r=function(t){function i(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,s(n(e),"move",!1),s(n(e),"_path",[]),s(n(e),"speed",10),s(n(e),"roleAngel",0),s(n(e),"step",0),s(n(e),"currstep",null),s(n(e),"anm",null),s(n(e),"anmName",null),s(n(e),"pos",new h),s(n(e),"des",new h),e}e(i,t);var o=i.prototype;return o.onEnable=function(){this.anm=this.node.getComponent(a),this.anmName=null,this.playLoopAnm("idle"),this.speed=5+15*Math.random()},o.onDisable=function(){this.move=!1,this.anm=null,this._path.length=0,this.currstep=null,this.step=0},o.playLoopAnm=function(t){this.anmName!=t&&(this.anm.play(t),this.anmName=t)},o.startMove=function(t){this.stopMove(),this._path=t,this.move=!0},o.stopMove=function(){this.move=!1,this._path.length=0,this.step=0,this.currstep=null,this.playLoopAnm("idle")},o.update=function(t){this.move&&(this.playLoopAnm("run"),this.pos.set(this.node.position),this.currstep!=this.step&&(this.des.set(this._path[this.step]),this.rotateRole(this.pos,this.des),this.currstep=this.step),l.MoveTowards(this.pos,this.pos,this.des,t*this.speed)&&this.changeStep(),this.node.setPosition(this.pos))},o.changeStep=function(){this.step++,this.step==this._path.length&&(this.playLoopAnm("idle"),this.move=!1)},o.rotateRole=function(t,e){this.roleAngel=Math.atan2(e.x-t.x,e.z-t.z)*(180/Math.PI)%360,this.node.setRotationFromEuler(0,this.roleAngel)},i}(p))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/RandomMatColor.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var t,r,e,n,a,c;return{setters:[function(o){t=o.inheritsLoose},function(o){r=o.cclegacy,e=o._decorator,n=o.MeshRenderer,a=o.Color,c=o.Component}],execute:function(){var l;r._RF.push({},"ee19eGTEOpM04RQAZpcFtmr","RandomMatColor",void 0);var s=e.ccclass;e.property,o("RandomMatColor",s("RandomMatColor")(l=function(o){function r(){return o.apply(this,arguments)||this}return t(r,o),r.prototype.onEnable=function(){this.node.getComponent(n).material.setProperty("mainColor",new a(Math.floor(255*Math.random()),Math.floor(255*Math.random()),Math.floor(255*Math.random())))},r}(c))||l);r._RF.pop()}}}));

System.register("chunks:///_virtual/ShaderToy.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n,i,o,a,c,s,l,u,p,h,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.SpriteComponent,s=e.Material,l=e.sys,u=e.view,p=e.macro,h=e.screen,f=e.Component}],execute:function(){var y,b,g,m,d,S,v;o._RF.push({},"f139eZcCV1BMJATtYpZqGbk","ShaderToy",void 0);var T=a.ccclass,M=a.property;e("ShaderToy",(y=T("ShaderToy"),b=M(c),g=M({type:s}),y((S=t((d=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(i(t),"bg",S,i(t)),n(i(t),"mat",v,i(t)),t}r(t,e);var o=t.prototype;return o.onEnable=function(){this.bg.customMaterial=this.mat[Math.floor(this.mat.length*Math.random())],this.changeScreeen()},o.changeScreeen=function(){l.isBrowser&&l.isMobile&&(u.setOrientation(p.ORIENTATION_LANDSCAPE),h.requestFullScreen())},t}(f)).prototype,"bg",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(d.prototype,"mat",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=d))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/Builder.ts",["cc","./nUtils.ts"],(function(r){"use strict";var e,n,t;return{setters:[function(r){e=r.cclegacy,n=r.Vec3},function(r){t=r.nUtils}],execute:function(){e._RF.push({},"f8929iHFYlJlaz7L0cvyCLc","Builder",void 0);var o={faces:[],vertices:[],centroid:[]};r("Builder",function(){function r(){}return r.buildZoneByJson=function(r){this.cleanGeometry();for(var e=r.vertices,t=r.faces,i=0;i<e.length;i+=3)o.vertices.push(new n(e[i],e[i+1],e[i+2]));for(var s=0;s<t.length/3;s++)this.computeCentroids(t[3*s],t[3*s+1],t[3*s+2]);return this.buildZone(o)},r.cleanGeometry=function(){o.vertices.length=0,o.faces.length=0,o.centroid.length=0},r.buildZone=function(r){var e=this.buildNavMesh(r);return this.groupNavMesh(e)},r.buildNavMesh=function(r){t.mergeVertices(r);var e=this.buildPolygonsFromGeometry(r);return e},r.computeCentroids=function(r,e,t){var i=new n;n.add(i,o.vertices[e],o.vertices[r]),n.add(i,o.vertices[t],i),n.multiplyScalar(i,i,1/3),o.faces.push(new Array(r,e,t)),o.centroid.push(i)},r.buildPolygonsFromGeometry=function(r){for(var e=[],n=r.vertices,t=0,o=r.faces.length;t<o;t++)e.push({vertexIds:r.faces[t],centroid:r.centroid[t],neighbours:[]});for(var i={polygons:e,vertices:n},s=0,u=e.length;s<u;s++){var c=e[s];this.buildPolygonNeighbours(c,i)}return i},r.groupNavMesh=function(r){var e={vertices:null,groups:null};e.vertices=r.vertices;var n=this.buildPolygonGroups(r);e.groups=[];for(var o=function(r,e){for(var n=0;n<r.length;n++)if(e===r[n])return n},i=0,s=n.length;i<s;i++){for(var u=n[i],c=[],l=0,g=u.length;l<g;l++){for(var h=u[l],a=[],d=[],v=0,f=h.neighbours.length;v<f;v++){var p=h.neighbours[v];a.push(o(u,p)),d.push(this.getSharedVerticesInOrder(h,p))}h.centroid.x=t.roundNumber(h.centroid.x,2),h.centroid.y=t.roundNumber(h.centroid.y,2),h.centroid.z=t.roundNumber(h.centroid.z,2),c.push({id:o(u,h),neighbours:a,vertexIds:h.vertexIds,centroid:h.centroid,portals:d})}e.groups.push(c)}return e},r.buildPolygonNeighbours=function(r,e){r.neighbours=[];for(var t=0,o=e.polygons.length;t<o;t++){if(r!==e.polygons[t])if(!(n.squaredDistance(r.centroid,e.polygons[t].centroid)>1e4))this.arrayIntersect(r.vertexIds,e.polygons[t].vertexIds).length>=2&&r.neighbours.push(e.polygons[t])}},r.getSharedVerticesInOrder=function(r,e){var n=r.vertexIds,t=n[0],o=n[1],i=n[2],s=e.vertexIds,u=s.includes(t),c=s.includes(o),l=s.includes(i);return u&&c&&l?Array.from(n):u&&c?[t,o]:c&&l?[o,i]:u&&l?[i,t]:(console.warn("Error,neighbors with <2 shared vertices found."),[])},r.buildPolygonGroups=function(r){var e=r.polygons,n=[],t=0;function o(r){for(var e=0,n=r.neighbours.length;e<n;e++){var t=r.neighbours[e];null==t.group&&(t.group=r.group,o(t))}}for(var i=0,s=e.length;i<s;i++){var u=e[i];null==u.group&&(u.group=t++,o(u)),n[u.group]||(n[u.group]=[]),n[u.group].push(u)}return n},r.arrayIntersect=function(){for(var r,e,n,t,o,i,s=[],u={},c=arguments.length,l=new Array(c),g=0;g<c;g++)l[g]=arguments[g];for(i=l.length-1,n=l[0].length,e=0,r=0;r<=i;r++)(t=l[r].length)<n&&(e=r,n=t);for(r=0;r<=i;r++){o=l[t=r===e?0:r||e].length;for(var h=0;h<o;h++){var a=l[t][h];u[a]===r-1?r===i?(s.push(a),u[a]=0):u[a]=r:0===r&&(u[a]=0)}}return s},r}());e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./nUtils.ts","./Builder.ts","./BinaryHeap.ts","./Astar.ts","./Channel.ts","./Plane.ts","./Triangle.ts","./NavMesh.ts","./ClampedCtrl.ts","./joy-stick.ts","./NavMeshAgent.ts","./PoolManager.ts","./NavTest.ts","./SceneTest.ts","./RandomMatColor.ts","./ShaderToy.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});